{"version":3,"sources":["utils/request.js","components/Panel/index.js","pages/home/index.css","components/Player/index.js","components/Player/MusicList/index.js","pages/home/index.js"],"names":["service","axios","create","timeout","withCredentials","interceptors","request","use","config","console","log","err","Promise","reject","response","status","data","error","Panel","props","children","PanelTopLeftEle","className","useState","currentPageObj","set_currentPageObj","useEffect","pathname","window","location","curArr","routeConfig","routes","filter","item","path","length","Item","name","defaultProps","module","exports","perimeter","Math","PI","formetTime","val","isNaN","sec","floor","slice","min","TopNav","isPlay","set_isPlay","Map","currentMusic","set_currentMusic","muTotalTime","set_muTotalTime","muCurTime","set_muCurTime","couterRef2","useRef","audioEle","getRandomMusic","url","method","params","sort","format","then","res","fromJS","catch","warn","changeCurrentMusicFn","clearInterval","current","playPercent","useMemo","get","onClick","src","alt","srcSet","muEle","duration","currentTime","play","pause","setInterval","width","height","cx","cy","r","strokeWidth","stroke","fill","strokeDasharray","id","transform","percent","strokeColor","trailColor","showInfo","style","left","ref","Home","submitFn","render","styles","homeWrap","content","title","slider","state","React","Component"],"mappings":"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","file":"static/js/Page-home.61546334.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\n// 创建axios实例\r\nconst service = axios.create({\r\n//   baseURL: process.env.BASE_API, // api的base_url\r\n  timeout: 200000, // 请求超时时间\r\n  withCredentials: true, // 选项表明了是否是跨域请求\r\n})\r\nservice.interceptors.request.use(config => {\r\n//   Toast.loading('加载中',1)              // loading组件，显示文字加载中，自动关闭延时1s\r\n  console.log('request go', config);\r\n  return config;\r\n}, err => {\r\n  console.log('请求失败')\r\n  return Promise.reject(err)\r\n})\r\n// 拦截响应\r\nservice.interceptors.response.use(config => {\r\n//   Toast.hide()                             // 销毁Toast组件\r\n  console.log('response get')\r\n  return config;\r\n}, err => {\r\n  console.log('响应失败')\r\n  return Promise.reject(err)\r\n})\r\n\r\n// respone拦截器\r\nservice.interceptors.response.use(\r\n  response => {\r\n    /**\r\n    * code为非000000是抛错 可结合自己业务进行修改\r\n    */\r\n    if (response.status === 200 && response.data) {\r\n      return response.data\r\n    }\r\n    return response\r\n  },\r\n  error => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\nexport default service\r\n","/*\r\n * @Author: mikey.liudekang\r\n * @Date: 2019-09-17 20:58:00\r\n * @Last Modified by: mikey.liudekang\r\n * @Last Modified time: 2019-11-24 20:01:12\r\n */\r\nimport React, { useEffect, useState } from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport { Breadcrumb, Dropdown, Button } from 'antd'\r\nimport routeConfig from 'Src/router/routeConfig'\r\n\r\nimport './index.less';\r\n\r\nconst Panel = (props) => {\r\n  // console.log(1333, props, window, routeConfig)\r\n  const { children, PanelTopLeftEle, className, } = props;\r\n  const [currentPageObj, set_currentPageObj] = useState({ })\r\n  useEffect(() => {\r\n    const pathname = window.location.pathname;\r\n    const curArr = routeConfig.routes.filter(item => item.path === pathname);\r\n    if (curArr.length) {\r\n      set_currentPageObj(curArr[0])\r\n    }\r\n    // const current = window.Bmob ? window.Bmob.User.current() : null;\r\n    // if (current && typeof current === 'object') {\r\n    //   window.user = current\r\n    //   set_user(current)\r\n    //   set_isLogin(true)\r\n    // }\r\n    // console.log('user===', current)\r\n  }, [set_currentPageObj])\r\n\r\n  const loginOutFn = () => {\r\n    // window.Bmob && window.Bmob.User.logout();\r\n    // set_user({})\r\n    // set_isLogin(false)\r\n    // window.user = null\r\n  }\r\n\r\n  return (\r\n    <div className={'panel_wrapper ' + className}>\r\n      <div className='panel_top'>\r\n        <Breadcrumb>\r\n          <Breadcrumb.Item>{currentPageObj.name}</Breadcrumb.Item>\r\n        </Breadcrumb>\r\n        {PanelTopLeftEle}\r\n      </div>\r\n      <div className='panel_main'>\r\n        {\r\n          children\r\n        }\r\n      </div>\r\n    </div>\r\n\r\n  )\r\n}\r\nPanel.propTypes = {\r\n  children: PropTypes.any,\r\n  PanelTopLeftEle: PropTypes.element,\r\n  // itemLabel: PropTypes.string,\r\n  // itemClassName: PropTypes.string,\r\n  // itemRule: PropTypes.array,\r\n\r\n  className: PropTypes.string,\r\n  // placeholder: PropTypes.string,\r\n  // BraftEditorCallBackFn: PropTypes.func,\r\n}\r\nPanel.defaultProps = {\r\n  // itemKey: 'remark',\r\n  // children: '',\r\n  // PanelTopLeftEle: '',\r\n  className: '',\r\n};\r\nexport default Panel\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeWrap\":\"src-pages-home-index-homeWrap-2NfMD-T5\",\"content\":\"src-pages-home-index-content-r1Um_tUL\",\"title\":\"src-pages-home-index-title-3wMAwfVV\",\"slider\":\"src-pages-home-index-slider-2MvPfmo9\"};","/*\r\n * @Author: mikey.liudekang\r\n * @Date: 2019-09-17 20:58:00\r\n * @Last Modified by: mikey.liudekang\r\n * @Last Modified time: 2020-07-06 22:38:02\r\n */\r\nimport React, { useEffect, useState, useRef, useMemo } from 'react'\r\nimport { Menu, Dropdown, Button, Progress } from 'antd'\r\nimport { fromJS, Map, List } from 'immutable'\r\nimport service from 'Src/utils/request';\r\n\r\nimport MusicList from './MusicList';\r\n\r\nimport './index.less';\r\n\r\nconst perimeter = Math.PI * 2 * 19;\r\nconst time_interval = 1;\r\n\r\nconst formetTime = (val) => {\r\n  if (!val || isNaN(val)) {\r\n    return '00:00'\r\n  }\r\n  const sec = ('00' + Math.floor(val % 60)).slice(-2);\r\n  const min = ('00' + Math.floor(val / 60)).slice(-2)\r\n\r\n  return `${min}:${sec}`\r\n}\r\n\r\nconst TopNav = () => {\r\n  const [isLogin, set_isLogin] = useState(false)\r\n  const [isPlay, set_isPlay] = useState(false)\r\n  // const [playPercent, set_playPercent] = useState(0)\r\n\r\n  const [currentMusic, set_currentMusic] = useState(Map({}))\r\n  const [muTotalTime, set_muTotalTime] = useState(0)\r\n  const [muCurTime, set_muCurTime] = useState(0)\r\n\r\n  const couterRef2 = useRef();\r\n  const audioEle = useRef();\r\n  useEffect(() => {\r\n    getRandomMusic()\r\n    // return () => {\r\n    //   console.log(3333, couterRef2.current)\r\n    //   clearInterval(couterRef2.current)\r\n    // }\r\n  }, [])\r\n\r\n  const changPlayPauseFn = () => {\r\n    // let percent = 0;\r\n    const muEle = audioEle.current;\r\n    if (!muEle) {\r\n      return console.warn('未找到audio标签');\r\n    }\r\n    const { duration, currentTime, } = muEle;\r\n    console.log(4444, duration, currentTime, audioEle.current)\r\n    muEle.play()\r\n\r\n    if (isPlay) {\r\n      muEle.pause()\r\n      set_isPlay(false);\r\n      clearInterval(couterRef2.current)\r\n    } else {\r\n      muEle.play()\r\n      set_isPlay(true)\r\n      set_muTotalTime(duration)\r\n\r\n      couterRef2.current = setInterval(() => {\r\n        console.log(4333, muEle.currentTime);\r\n        set_muCurTime(muEle.currentTime)\r\n        if (currentTime >= duration) {\r\n          clearInterval(couterRef2.current)\r\n        }\r\n      }, 1000)\r\n    }\r\n  }\r\n\r\n  const getRandomMusic = () => {\r\n    service({\r\n      url: '/wyyApi/api/rand.music',\r\n      method: 'get',\r\n      params: {\r\n        sort: '热歌榜', // 99121191,\r\n        format: 'json',\r\n      },\r\n    })\r\n      .then(res => {\r\n        console.log(3444, res)\r\n        const muSrc = res?.data?.url;\r\n        if (muSrc) {\r\n          set_currentMusic(fromJS(res?.data))\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.warn(444, err)\r\n      })\r\n  }\r\n\r\n  const changeCurrentMusicFn = () => {\r\n    set_isPlay(false);\r\n    clearInterval(couterRef2.current)\r\n    set_muTotalTime(0)\r\n    set_muCurTime(0)\r\n\r\n    getRandomMusic()\r\n  }\r\n\r\n  const playPercent = useMemo(() => {\r\n    console.log('name memo 触发', muTotalTime, muCurTime, muCurTime / muTotalTime)\r\n    if (!muTotalTime || !muTotalTime) {\r\n      return 0\r\n    }\r\n    return muCurTime / muTotalTime // 返回一个函数\r\n  }, [muTotalTime, muCurTime])\r\n\r\n  return (\r\n    <div className='player_wrapper'>\r\n      {/* <i className='iconfont iconyinyue'></i> */}\r\n      <div className='player_main'>\r\n        <div className='p_main_info p_main_left'>\r\n          <dl className='music_info_item music_title'>\r\n            <dt className='m_icon'><i className='iconfont iconyinyue'></i> </dt>\r\n            <dd className='m_value'>{currentMusic.get('name')}</dd>\r\n          </dl>\r\n          <dl className='music_info_item music_user'>\r\n            <dt className='m_icon'><i className='iconfont iconuser'></i> </dt>\r\n            <dd className='m_value'>{currentMusic.get('artistsname')}</dd>\r\n          </dl>\r\n          <dl className='music_info_item music_folder'>\r\n            <dt className='m_icon'><i className='iconfont iconwenjianjia'></i> </dt>\r\n            <dd className='m_value'>{currentMusic.get('name')}</dd>\r\n          </dl>\r\n\r\n          <p className='m_controlsBtn'>\r\n            <i className='iconfont iconxunhuan'></i>\r\n            <i className='iconfont iconxiayishou1' onClick={changeCurrentMusicFn}></i>\r\n          </p>\r\n        </div>\r\n\r\n        <div className='p_main_center'>\r\n          <div className='music_img'>\r\n            {/* <img src='/image.png' alt='' srcSet='' /> */}\r\n            <img src={currentMusic.get('picurl')} alt='' srcSet='' />\r\n          </div>\r\n          {/* 播放暂停按钮 */}\r\n          <div className='Play_pause_btns' onClick={changPlayPauseFn}>\r\n            {\r\n              isPlay ? <i className='iconfont iconzanting'></i> : <i className='iconfont iconbofang'></i>\r\n            }\r\n          </div>\r\n          {/* 进度条 */}\r\n          <svg className='Play_pause_progress' width='40' height='40' >\r\n            <circle cx='20' cy='20' r='19' strokeWidth='4' stroke='rgb(108, 105, 113)' fill='black'></circle>\r\n            <circle strokeDasharray={isPlay ? perimeter * playPercent + ' ' + perimeter * (1 - playPercent) : ''} id='c1' cx='20' cy='20' r='19' strokeWidth='4' stroke={isPlay ? 'rgb(129, 195, 0)' : '#f30'} fill='none' transform='matrix(0,-1,1,0,0,40)' ></circle>\r\n          </svg>\r\n        </div>\r\n\r\n        <div className='p_main_info p_main_right'>\r\n          <dl className='music_info_item music_times'>\r\n            <dt className='m_icon'><i className='iconfont icontime'></i> </dt>\r\n            <dd className='m_value'>{formetTime(muCurTime)} / {formetTime(muTotalTime)}</dd>\r\n          </dl>\r\n          <dl className='music_info_item music_types'>\r\n            <dt className='m_icon'><i className='iconfont iconxunhuan'></i> </dt>\r\n            <dd className='m_value'>顺序播放</dd>\r\n          </dl>\r\n          <dl className='music_info_item music_lirc'>\r\n            <dt className='m_icon'><i className='iconfont iconicon_duihao-mian'></i> </dt>\r\n            <dd className='m_value'>歌词隐藏</dd>\r\n          </dl>\r\n\r\n          <p className='m_controlsBtn'>\r\n            <i className='iconfont iconxiayishou' onClick={changeCurrentMusicFn}></i>\r\n            <i className='iconfont iconsuiji'></i>\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className='player_footer'>\r\n        <i className='iconfont iconiconfontdaohanggonggao'></i>\r\n        <div className='progress_wrap'>\r\n          <Progress\r\n            className='progress'\r\n            percent={playPercent * 100}\r\n            strokeColor='#81c300'\r\n            trailColor='#818680'\r\n            strokeWidth={5}\r\n            showInfo={false}\r\n          />\r\n          <span className='spot' style={{ left: playPercent * 100 + '%', }}></span>\r\n          <audio ref={audioEle} src={currentMusic.get('url')}> 您的浏览器不支持 audio 元素</audio>\r\n        </div>\r\n\r\n        <i className='iconfont iconxiazai'></i>\r\n        <i className='iconfont iconkaiguanguan'></i>\r\n        <i className='iconfont iconmulu'></i>\r\n      </div>\r\n\r\n      {/* <MusicList callBackCurrentMusic={callBackCurrentMusic}></MusicList> */}\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default TopNav\r\n","/*\r\n * @Author: mikey.liudekang\r\n * @Date: 2019-09-17 20:58:00\r\n * @Last Modified by: mikey.liudekang\r\n * @Last Modified time: 2020-07-05 22:20:35\r\n */\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport { Menu, Dropdown, Button, Progress } from 'antd'\r\nimport service from 'Src/utils/request';\r\nimport { fromJS, Map, List } from 'immutable';\r\nimport classnames from 'classnames';\r\n\r\nimport './index.less';\r\n\r\nconst perimeter = Math.PI * 2 * 19;\r\nconst time_interval = 1;\r\n\r\nconst TopNav = (props) => {\r\n  const [curId, set_curId] = useState()\r\n  const [MusicDataList, set_MusicDataList] = useState(List([]))\r\n  const [MusicTotal, set_MusicTotal] = useState(0)\r\n\r\n  const { callBackCurrentMusic, } = props;\r\n\r\n  useEffect(() => {\r\n\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    service({\r\n      url: '/kugouApi/v3/rank/newsong',\r\n      method: 'get',\r\n      params: {\r\n        version: '9108',\r\n        plat: 0,\r\n        with_cover: 1,\r\n        pagesize: 30,\r\n        page: 2,\r\n        type: 3,\r\n        area_code: 1,\r\n\r\n        // with_res_tag: 1,\r\n      },\r\n    })\r\n      .then(res => {\r\n        const musicData = res?.data?.info;\r\n        const musicTotal = res?.data?.total;\r\n        if (Array.isArray(musicData) && musicTotal) {\r\n          set_MusicDataList(fromJS(musicData))\r\n          set_MusicTotal(musicTotal)\r\n        }\r\n        console.log(11, res)\r\n      })\r\n      .catch(err => {\r\n        console.warn(222, err)\r\n      })\r\n  }, [set_MusicDataList])\r\n\r\n  const selectMusicFn = (val) => {\r\n    set_curId(val.get('audio_id'))\r\n    callBackCurrentMusic && callBackCurrentMusic(val)\r\n  }\r\n\r\n  return (\r\n    <div className='music_list_wrapper'>\r\n      <div className='music_list_title'>日韩新歌({MusicTotal})</div>\r\n\r\n      <ul className='list_main'>\r\n        {\r\n          MusicDataList.size && MusicDataList.map((item, index) => (\r\n            <li\r\n              key={item.get('filename')}\r\n              className={classnames({\r\n                'music_item': true,\r\n                'active_musice_item': item.get('audio_id') === curId,\r\n              })}\r\n              onClick={() => selectMusicFn(item)}\r\n            >\r\n              <span className='num_index'>{index + 1}</span>\r\n              <span className='mu_title'>{item.get('filename')}</span>\r\n            </li>\r\n          ))\r\n        }\r\n\r\n      </ul>\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default TopNav\r\n","/*\r\n * @Author: mikey.liudekang\r\n * @Date: 2019-09-17 20:58:00\r\n * @Last Modified by: mikey.liudekang\r\n * @Last Modified time: 2020-06-09 22:07:07\r\n */\r\nimport React from 'react';\r\n\r\nimport { Button } from 'antd';\r\nimport service from 'Src/utils/request';\r\nimport Player from 'Src/components/Player';\r\nimport Panel from 'Src/components/Panel';\r\n\r\nimport styles from './index.css'\r\n\r\nexport default class Home extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {}\r\n  }\r\n\r\n  submitFn = () => {\r\n    service.get('/api/users')\r\n      .then(res => {\r\n        console.log(11, res)\r\n      })\r\n  }\r\n\r\n  render = () => {\r\n    return (\r\n      <Panel>\r\n        <div className={styles.homeWrap} >\r\n\r\n          <div className={styles.content}>\r\n            <h5 className={styles.title}>网页添加 Live2D 看板娘</h5>\r\n            <h5>当前首页</h5>\r\n            <Button onClick={this.submitFn}>annu</Button>\r\n            <Player></Player>\r\n          </div>\r\n\r\n          <div className={styles.slider}>\r\n            {/* <img src='https://i.loli.net/2017/08/02/598187babf39e.gif' /> */}\r\n            <img src='/dance.webp' />\r\n          </div>\r\n        </div>\r\n\r\n      </Panel>\r\n\r\n    )\r\n  }\r\n}\r\n"],"sourceRoot":""}